# Maintainer: Rdbo <rdbodev@gmail.com>
pkgname=initrdbo
pkgver=0.1.0
pkgrel=0
pkgdesc="A simple initramfs generator"
url="https://github.com/rdbo/initrdbo"
arch="all"
license="AGPL-3.0"
depends="
	busybox
	cryptsetup
	lddtree
	cpio
	xz
	"
triggers="$pkgname.trigger=/lib/modules/*"
source="$pkgname-$pkgver.tar.gz::https://github.com/rdbo/initrdbo/archive/refs/tags/$pkgver.tar.gz"

provides="initramfs-generator"
provider_priority=1 # must be lower than mkinitfs

build() {
	return 0
}

package() {
	install -D -m 755 "initrdbo" "$pkgdir/sbin/initrdbo"
	mkdir -p "$pkgdir/etc/initrdbo.d"
	cp -r "initrdbo.d/." "$pkgdir/etc/initrdbo.d/."
}

sha512sums="
9fdd88e6094c00e1fd51fdb8212d24a4b0142c102b7bc108beef513c0a8f874f8f0422fbba070ab5a134b8c6bc16ae1b86532a66c1624ca0e0fb22d142a28b4e  initrdbo-0.1.0.tar.gz
"
